!function(window,document,undefined){var classes=[],tests=[],ModernizrProto={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(test,cb){var self=this;setTimeout(function(){cb(self[test])},0)},addTest:function(name,fn,options){tests.push({name:name,fn:fn,options:options})},addAsyncTest:function(fn){tests.push({name:null,fn:fn})}},Modernizr=function(){};Modernizr.prototype=ModernizrProto,Modernizr=new Modernizr;var docElement=document.documentElement,isSVG="svg"===docElement.nodeName.toLowerCase();isSVG||function(window,document){var supportsHtml5Styles,supportsUnknownElements,options=window.html5||{},reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,expando="_html5shiv",expanID=0,expandoData={};function getElements(){var elements=html5.elements;return"string"==typeof elements?elements.split(" "):elements}function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];return data||(data={},expanID++,ownerDocument[expando]=expanID,expandoData[expanID]=data),data}function createElement(nodeName,ownerDocument,data){return ownerDocument||(ownerDocument=document),supportsUnknownElements?ownerDocument.createElement(nodeName):(data||(data=getExpandoData(ownerDocument)),!(node=data.cache[nodeName]?data.cache[nodeName].cloneNode():saveClones.test(nodeName)?(data.cache[nodeName]=data.createElem(nodeName)).cloneNode():data.createElem(nodeName)).canHaveChildren||reSkip.test(nodeName)||node.tagUrn?node:data.frag.appendChild(node));var node}function shivDocument(ownerDocument){ownerDocument||(ownerDocument=document);var data=getExpandoData(ownerDocument);return!html5.shivCSS||supportsHtml5Styles||data.hasCSS||(data.hasCSS=!!function(ownerDocument,cssText){var p=ownerDocument.createElement("p"),parent=ownerDocument.getElementsByTagName("head")[0]||ownerDocument.documentElement;return p.innerHTML="x<style>"+cssText+"</style>",parent.insertBefore(p.lastChild,parent.firstChild)}(ownerDocument,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),supportsUnknownElements||function(ownerDocument,data){data.cache||(data.cache={},data.createElem=ownerDocument.createElement,data.createFrag=ownerDocument.createDocumentFragment,data.frag=data.createFrag()),ownerDocument.createElement=function(nodeName){return html5.shivMethods?createElement(nodeName,ownerDocument,data):data.createElem(nodeName)},ownerDocument.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+getElements().join().replace(/[\w\-:]+/g,function(nodeName){return data.createElem(nodeName),data.frag.createElement(nodeName),'c("'+nodeName+'")'})+");return n}")(html5,data.frag)}(ownerDocument,data),ownerDocument}!function(){try{var a=document.createElement("a");a.innerHTML="<xyz></xyz>",supportsHtml5Styles="hidden"in a,supportsUnknownElements=1==a.childNodes.length||function(){document.createElement("a");var frag=document.createDocumentFragment();return void 0===frag.cloneNode||void 0===frag.createDocumentFragment||void 0===frag.createElement}()}catch(e){supportsUnknownElements=supportsHtml5Styles=!0}}();var html5={elements:options.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:"3.7.3",shivCSS:!1!==options.shivCSS,supportsUnknownElements:supportsUnknownElements,shivMethods:!1!==options.shivMethods,type:"default",shivDocument:shivDocument,createElement:createElement,createDocumentFragment:function(ownerDocument,data){if(ownerDocument||(ownerDocument=document),supportsUnknownElements)return ownerDocument.createDocumentFragment();for(var clone=(data=data||getExpandoData(ownerDocument)).frag.cloneNode(),i=0,elems=getElements(),l=elems.length;i<l;i++)clone.createElement(elems[i]);return clone},addElements:function(newElements,ownerDocument){var elements=html5.elements;"string"!=typeof elements&&(elements=elements.join(" ")),"string"!=typeof newElements&&(newElements=newElements.join(" ")),html5.elements=elements+" "+newElements,shivDocument(ownerDocument)}};window.html5=html5,shivDocument(document),"object"==typeof module&&module.exports&&(module.exports=html5)}(void 0!==window?window:this,document),function(){var featureNames,feature,aliasIdx,result,nameIdx,featureNameSplit;for(var featureIdx in tests)if(tests.hasOwnProperty(featureIdx)){if(featureNames=[],(feature=tests[featureIdx]).name&&(featureNames.push(feature.name.toLowerCase()),feature.options&&feature.options.aliases&&feature.options.aliases.length))for(aliasIdx=0;aliasIdx<feature.options.aliases.length;aliasIdx++)featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());for(result="function"==typeof feature.fn?feature.fn():feature.fn,nameIdx=0;nameIdx<featureNames.length;nameIdx++)1===(featureNameSplit=featureNames[nameIdx].split(".")).length?Modernizr[featureNameSplit[0]]=result:(!Modernizr[featureNameSplit[0]]||Modernizr[featureNameSplit[0]]instanceof Boolean||(Modernizr[featureNameSplit[0]]=new Boolean(Modernizr[featureNameSplit[0]])),Modernizr[featureNameSplit[0]][featureNameSplit[1]]=result),classes.push((result?"":"no-")+featureNameSplit.join("-"))}}(),function(classes){var className=docElement.className,classPrefix=Modernizr._config.classPrefix||"";if(isSVG&&(className=className.baseVal),Modernizr._config.enableJSClass){var reJS=new RegExp("(^|\\s)"+classPrefix+"no-js(\\s|$)");className=className.replace(reJS,"$1"+classPrefix+"js$2")}Modernizr._config.enableClasses&&(className+=" "+classPrefix+classes.join(" "+classPrefix),isSVG?docElement.className.baseVal=className:docElement.className=className)}(classes),delete ModernizrProto.addTest,delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++)Modernizr._q[i]();window.Modernizr=Modernizr}(window,document),function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var stubFactoryCreator=require("./stub-factory.js"),loaderCreator=require("./loader.js");module.exports=function(window,document){var i,queue=[],stubFactory=stubFactoryCreator(window,queue),loader=loaderCreator(window,document,queue),methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"];for(window.analytics=window.analytics||[],i=0;i<methods.length;i++)window.analytics[methods[i]]=stubFactory.generateStub(methods[i]);window.analytics.load=loader.loadAnalytics}},{"./loader.js":4,"./stub-factory.js":5}],2:[function(require,module,exports){require("./analytics-async-loader-entry.js")(window,document)},{"./analytics-async-loader-entry.js":1}],3:[function(require,module,exports){module.exports=function(win,doc,queue,options){var injector={addAnalyticsAndIntegrationScripts:function(){injector.injectScript(options.url,"script-analytics-js",onAnalyticsScriptLoaded),Object.keys(options.integrations).forEach(function(key){var id="script-analytics-js-integration-"+key;options.integrations[key].integrationUrl&&injector.injectScript(options.integrations[key].integrationUrl,id,null)})},injectScript:function(src,id,callback){var firstScript,script;if(doc.getElementById(id))return;firstScript=doc.getElementsByTagName("script")[0],(script=doc.createElement("script")).async=!0,script.id=id,script.type="text/javascript",script.src=src,callback&&script.addEventListener("load",callback,!1);firstScript.parentNode.insertBefore(script,firstScript)},onAnalyticsScriptLoaded:onAnalyticsScriptLoaded};return injector;function onAnalyticsScriptLoaded(){var item,method;for(win.analytics.initialize(options.integrations,options.options);0<queue.length;)method=(item=queue.shift()).shift(),win.analytics[method]&&win.analytics[method].apply(win.analytics,item)}}},{}],4:[function(require,module,exports){var injectorCreator=require("./injector.js");module.exports=function(win,doc,queue){return{loadAnalytics:function(options){var opts=options||{};opts.url=opts.url||"/assets/js/lib/analytics.js",opts.integrations=opts.integrations||{},opts.options=opts.options||{},injectorCreator(win,doc,queue,opts).addAnalyticsAndIntegrationScripts()}}}},{"./injector.js":3}],5:[function(require,module,exports){module.exports=function(win,queue){return{generateStub:function(method){return function(){var args=Array.prototype.slice.call(arguments);return args.unshift(method),queue.push(args),win.analytics}}}}},{}]},{},[2]),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).shutterstockPrivateanalyticsListener=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global){var root,factory,createLogger=require("./logger.js"),createHandler=require("./handler.js"),createTracker=require("./tracker.js"),createBinder=require("./binder.js"),createValidator=require("./validator.js"),eventLib=require("gator");root=global,factory=function(root){var logger=createLogger(root),handler=createHandler(root),tracker=createTracker(root),binder=createBinder(root),validator=createValidator(root),validate=function(){logger.log("validateTrackingData"),Array.prototype.slice.call(root.document.querySelectorAll("[data-track]")).forEach(function(elem){var dataStr=elem.getAttribute("data-track"),parsed=handler.parseTrackAttribute(dataStr),messages=validator.buildValidateMessage(parsed,dataStr,elem);messages.length&&(messages.unshift(elem),messages.unshift("Issues found with the following element: "),logger.error.apply({},messages))})};return{listen:function(getCustomData){var getFirstData;logger.log("listen"),root.debugAnalytics&&validate(),getFirstData=getCustomData||function(){return{}},binder.attachDirectEventListeners(binder.directEventActionsSelector,"mouseenter",handler.handleAction("hover",getFirstData,eventLib),eventLib),binder.setUpListeners(eventLib,handler.handleAction,getFirstData)},validate:validate,track:tracker.sendTrack,VERSION:"3.0.3"}},module.exports=factory,root.AnalyticsListener=factory(root)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./binder.js":2,"./handler.js":3,"./logger.js":4,"./tracker.js":5,"./validator.js":6,gator:7}],2:[function(require,module,exports){module.exports=function(root){var delegatedEventActions=["click","submit","linkClick","change"],directEventActions=["hover"],supportedEventActions=delegatedEventActions.concat(directEventActions),directEventActionsSelector=directEventActions.map(function(selector){return'[data-track^="'+selector+'"]'}).join(",");return{directEventActions:directEventActions,supportedEventActions:supportedEventActions,directEventActionsSelector:directEventActionsSelector,attachDirectEventListeners:function(selector,eventName,listener,eventLib){function nodeInsertedHandler(event){var animationName=event.animationName||event.originalEvent&&event.originalEvent.animationName;"nodeInserted"===animationName&&eventLib(event.target).off(eventName,listener).on(eventName,listener)}eventLib(root.document).on(eventName,selector,listener),function(selector){var styleElement=root.document.createElement("style"),cssCode="@keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-moz-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-webkit-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-ms-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-o-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}"+selector+"{animation-duration:.01s;-o-animation-duration:.01s;-ms-animation-duration:.01s;-moz-animation-duration:.01s;-webkit-animation-duration:.01s;animation-name:nodeInserted;-o-animation-name:nodeInserted;-ms-animation-name:nodeInserted;-moz-animation-name:nodeInserted;-webkit-animation-name:nodeInserted};";styleElement.type="text/css",styleElement.styleSheet?styleElement.styleSheet.cssText=cssCode:styleElement.appendChild(root.document.createTextNode(cssCode));root.document.getElementsByTagName("head")[0].appendChild(styleElement)}(selector),eventLib(root.document).on("animationstart",nodeInsertedHandler),eventLib(root.document).on("MSAnimationStart",nodeInsertedHandler),eventLib(root.document).on("webkitAnimationStart",nodeInsertedHandler)},setUpListeners:function(eventLib,handleAction,getFirstData){delegatedEventActions.forEach(function(action){var domEvent="linkClick"===action?"click":action;eventLib(root.document).on(domEvent,"[data-track]",handleAction(action,getFirstData,eventLib))})}}}},{}],3:[function(require,module,exports){var createLogger=require("./logger.js"),createTracker=require("./tracker.js");module.exports=function(root){var logger=createLogger(root),tracker=createTracker(root);return{parseTrackAttribute:parseTrackAttribute,assignProp:assignProp,handleAction:function(action,getFirstData,eventLib){return function(event){var dataObj,dataStr=this.getAttribute("data-track"),target=event.target,parsed=parseTrackAttribute(dataStr);if(parsed&&-1<parsed.eventAction.indexOf(action)){assignProp(dataObj=getFirstData(this,event,dataStr),"eventAction",action),assignProp(dataObj,"pageSection",parsed.pageSection),assignProp(dataObj,"eventLabel",parsed.eventLabel),assignProp(dataObj,"url",root.document.URL),assignProp(dataObj,"eventCategory","userInteraction"),assignProp(dataObj,"name",void 0!==target.name&&""!==target.name?target.name:target.textContent),void 0!==parsed.eventValue&&null!==parsed.eventValue?assignProp(dataObj,"eventValue",parsed.eventValue):assignProp(dataObj,"eventValue",{});try{"linkClick"===action?function(target,dataStr,dataObj){tracker.link(target,dataStr,dataObj)}(target,dataStr,dataObj):"hover"===action?function(target,dataStr,dataObj,eventLib){var startTime=(new Date).getTime(),listener=function(){var hoverTime=(new Date).getTime()-startTime;hoverTime>(dataObj.eventValue.hoverTimeThreshold||1500)&&(assignProp(dataObj.eventValue,"hoverTime",hoverTime),tracker.sendTrack(dataStr,dataObj)),eventLib(target).off("mouseleave",listener)};eventLib(target).on("mouseleave",listener)}(target,dataStr,dataObj,eventLib):"change"===action?function(target,dataStr,dataObj){"select-multiple"===target.type?assignProp(dataObj.eventValue,"formElementValue",function(selectTarget){if(selectTarget.selectedOptions)return[].slice.call(selectTarget.selectedOptions);return[].slice.call(selectTarget.options).filter(function(item){return item.selected})}(target).map(function(item){return item.value})):"checkbox"===target.type?assignProp(dataObj.eventValue,"formElementValue",[].slice.call(root.document.getElementsByName(target.name)).filter(function(item){return item.checked}).map(function(item){return item.value})):void 0!==target.value&&assignProp(dataObj.eventValue,"formElementValue",target.value);tracker.sendTrack(dataStr,dataObj)}(target,dataStr,dataObj):function(dataStr,dataObj){tracker.sendTrack(dataStr,dataObj)}(dataStr,dataObj)}catch(err){logger.error(err)}}}}};function parseTrackAttribute(attr){var parsed,eventValue,parts=attr.trim().split(".");if(parts.length<3||-1!==attr.indexOf(" "))return null;if(parsed={eventAction:parts[0].split(","),pageSection:parts[1],eventLabel:parts[2]},(eventValue=parts.slice(3).join(".")).length)try{parsed.eventValue=function(eventValue){return JSON.parse(eventValue)}(eventValue)}catch(e){logger.error("Unable to parse eventValue as JSON: "+e.toString()),parsed.eventValue=null}return parsed}function assignProp(obj,propName,value){"string"==typeof obj[propName]&&root.debugAnalytics&&logger.error("`getFirstData` function assigned data to reserved property: "+propName+". This data will be overwritten."),obj[propName]=value}}},{"./logger.js":4,"./tracker.js":5}],4:[function(require,module,exports){module.exports=function(root){return{log:function(){root.debugAnalytics&&root.console.log.apply(root.console,arguments)},error:function(){root.debugAnalytics&&root.console.error.apply(root.console,arguments)}}}},{}],5:[function(require,module,exports){var createLogger=require("./logger.js");module.exports=function(root){var logger=createLogger(root);return{link:function(element,dataStr,dataObj){logger.log("Tracking Link: ",dataStr,dataObj),root.analytics.trackLink(element,dataStr,dataObj)},sendTrack:function(dataStr,dataObj){var dataOpts;dataObj.visit?dataObj.visit.visitorId?dataOpts={Optimizely:{userId:dataObj.visit.visitorId}}:logger.error("No visitor ID present in analytics data",dataObj):logger.error("Analytics data missing required object 'visit'!",dataStr,dataObj);logger.log("Tracking: ",dataStr,dataObj,dataOpts),root.analytics.track(dataStr,dataObj,dataOpts)}}}},{"./logger.js":4}],6:[function(require,module,exports){var createBinder=require("./binder.js");module.exports=function(root){var binder=createBinder(root);return{buildValidateMessage:function(parsed,dataStr,elem){var messages=[];parsed?(parsed.eventAction.forEach(function(action,index){-1===binder.supportedEventActions.indexOf(action)?messages.push("\n- Cannot track element because its eventAction `"+action+"` is not one of supported types: ["+binder.supportedEventActions+"]"):0<index&&-1<binder.directEventActions.indexOf(action)&&messages.push("\n- Cannot track element because its eventAction `"+action+"` must at the beginning of the attribute string")}),null===parsed.eventValue&&messages.push("\n- Cannot parse eventValue as JSON from <eventAction>.<pageSection>.<eventLabel>.<eventValue JSON> See error output above."),-1===parsed.eventAction.indexOf("submit")&&0<elem.children.length&&messages.push("\n- Element has children, which could lead to unexpected text recorded in the `name` field.  Confirm that the behavior is as expected."),-1<parsed.eventAction.indexOf("submit")&&!elem.name&&messages.push("\n- Form has no name attribute, which leads to nothing recorded in the `name` field.  Confirm that the behavior is as expected.")):-1<dataStr.trim().indexOf(" ")?messages.push("\n- Cannot track element because its data-track string contains spaces"):messages.push("\n- Cannot track element because data-track attribute does not match form of <eventAction>.<pageSection>.<eventLabel>[.<eventValue JSON>]");messages.length&&(messages.unshift(elem),messages.unshift("Issues found with the following element: "));return messages}}}},{"./binder.js":2}],7:[function(require,module,exports){!function(){var _matcher,_level=0,_id=0,_handlers={},_gatorInstances={};function _matchesSelector(element,selector,boundElement){return"_root"==selector?boundElement:element!==boundElement?function(element){return _matcher||(_matcher=element.matches?element.matches:element.webkitMatchesSelector?element.webkitMatchesSelector:element.mozMatchesSelector?element.mozMatchesSelector:element.msMatchesSelector?element.msMatchesSelector:element.oMatchesSelector?element.oMatchesSelector:Gator.matchesSelector)}(element).call(element,selector)?element:element.parentNode?(_level++,_matchesSelector(element.parentNode,selector,boundElement)):void 0:void 0}function _addHandler(gator,event,selector,callback){_handlers[gator.id]||(_handlers[gator.id]={}),_handlers[gator.id][event]||(_handlers[gator.id][event]={}),_handlers[gator.id][event][selector]||(_handlers[gator.id][event][selector]=[]),_handlers[gator.id][event][selector].push(callback)}function _removeHandler(gator,event,selector,callback){if(_handlers[gator.id])if(event)if(callback||selector)if(callback){if(_handlers[gator.id][event][selector])for(var i=0;i<_handlers[gator.id][event][selector].length;i++)if(_handlers[gator.id][event][selector][i]===callback){_handlers[gator.id][event][selector].splice(i,1);break}}else delete _handlers[gator.id][event][selector];else _handlers[gator.id][event]={};else for(var type in _handlers[gator.id])_handlers[gator.id].hasOwnProperty(type)&&(_handlers[gator.id][type]={})}function _bind(events,selector,callback,remove){if(this.element){events instanceof Array||(events=[events]),callback||"function"!=typeof selector||(callback=selector,selector="_root");var i,id=this.id;for(i=0;i<events.length;i++)remove?_removeHandler(this,events[i],selector,callback):(_handlers[id]&&_handlers[id][events[i]]||Gator.addEvent(this,events[i],_getGlobalCallback(events[i])),_addHandler(this,events[i],selector,callback));return this}function _getGlobalCallback(type){return function(e){!function(id,e,type){if(_handlers[id][type]){var selector,match,target=e.target||e.srcElement,matches={},i=0,j=0;for(selector in _level=0,_handlers[id][type])_handlers[id][type].hasOwnProperty(selector)&&(match=_matchesSelector(target,selector,_gatorInstances[id].element))&&Gator.matchesEvent(type,_gatorInstances[id].element,match,"_root"==selector,e)&&(_level++,_handlers[id][type][selector].match=match,matches[_level]=_handlers[id][type][selector]);for(e.stopPropagation=function(){e.cancelBubble=!0},i=0;i<=_level;i++)if(matches[i])for(j=0;j<matches[i].length;j++){if(!1===matches[i][j].call(matches[i].match,e))return Gator.cancel(e);if(e.cancelBubble)return}}}(id,e,type)}}}function Gator(element,id){if(!(this instanceof Gator)){for(var key in _gatorInstances)if(_gatorInstances[key].element===element)return _gatorInstances[key];return _gatorInstances[++_id]=new Gator(element,_id),_gatorInstances[_id]}this.element=element,this.id=id}Gator.prototype.on=function(events,selector,callback){return _bind.call(this,events,selector,callback)},Gator.prototype.off=function(events,selector,callback){return _bind.call(this,events,selector,callback,!0)},Gator.matchesSelector=function(){},Gator.cancel=function(e){e.preventDefault(),e.stopPropagation()},Gator.addEvent=function(gator,type,callback){var useCapture="blur"==type||"focus"==type;gator.element.addEventListener(type,callback,useCapture)},Gator.matchesEvent=function(){return!0},void 0!==module&&module.exports&&(module.exports=Gator),window.Gator=Gator}()},{}]},{},[1])(1)}),function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var stubFactoryCreator=require("./stub-factory.js"),loaderCreator=require("./loader.js");module.exports=function(window,document){var i,queue=[],stubFactory=stubFactoryCreator(window,queue),loader=loaderCreator(window,document,queue),methods=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group","on","once","off"];for(window.analytics=window.analytics||[],i=0;i<methods.length;i++)window.analytics[methods[i]]=stubFactory.generateStub(methods[i]);window.analytics.load=loader.loadAnalytics}},{"./loader.js":4,"./stub-factory.js":5}],2:[function(require,module,exports){require("./analytics-async-loader-entry.js")(window,document)},{"./analytics-async-loader-entry.js":1}],3:[function(require,module,exports){module.exports=function(win,doc,queue,options){var injector={addAnalyticsAndIntegrationScripts:function(){injector.injectScript(options.url,"script-analytics-js",onAnalyticsScriptLoaded),Object.keys(options.integrations).forEach(function(key){var id="script-analytics-js-integration-"+key;options.integrations[key].integrationUrl&&injector.injectScript(options.integrations[key].integrationUrl,id,null)})},injectScript:function(src,id,callback){var firstScript,script;if(doc.getElementById(id))return;firstScript=doc.getElementsByTagName("script")[0],(script=doc.createElement("script")).async=!0,script.id=id,script.type="text/javascript",script.src=src,callback&&script.addEventListener("load",callback,!1);firstScript.parentNode.insertBefore(script,firstScript)},onAnalyticsScriptLoaded:onAnalyticsScriptLoaded};return injector;function onAnalyticsScriptLoaded(){var item,method;for(win.analytics.initialize(options.integrations,options.options);0<queue.length;)method=(item=queue.shift()).shift(),win.analytics[method]&&win.analytics[method].apply(win.analytics,item)}}},{}],4:[function(require,module,exports){var injectorCreator=require("./injector.js");module.exports=function(win,doc,queue){return{loadAnalytics:function(options){var opts=options||{};opts.url=opts.url||"/assets/js/lib/analytics.js",opts.integrations=opts.integrations||{},opts.options=opts.options||{},injectorCreator(win,doc,queue,opts).addAnalyticsAndIntegrationScripts()}}}},{"./injector.js":3}],5:[function(require,module,exports){module.exports=function(win,queue){return{generateStub:function(method){return function(){var args=Array.prototype.slice.call(arguments);return args.unshift(method),queue.push(args),win.analytics}}}}},{}]},{},[2]),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).shutterstockPrivateanalyticsListener=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global){var root,factory,createLogger=require("./logger.js"),createHandler=require("./handler.js"),createTracker=require("./tracker.js"),createBinder=require("./binder.js"),createValidator=require("./validator.js"),eventLib=require("gator");root=global,factory=function(root){var logger=createLogger(root),handler=createHandler(root),tracker=createTracker(root),binder=createBinder(root),validator=createValidator(root),validate=function(){logger.log("validateTrackingData"),Array.prototype.slice.call(root.document.querySelectorAll("[data-track]")).forEach(function(elem){var dataStr=elem.getAttribute("data-track"),parsed=handler.parseTrackAttribute(dataStr),messages=validator.buildValidateMessage(parsed,dataStr,elem);messages.length&&(messages.unshift(elem),messages.unshift("Issues found with the following element: "),logger.error.apply({},messages))})};return{listen:function(getCustomData){var getFirstData;logger.log("listen"),root.debugAnalytics&&validate(),getFirstData=getCustomData||function(){return{}},binder.attachDirectEventListeners(binder.directEventActionsSelector,"mouseenter",handler.handleAction("hover",getFirstData,eventLib),eventLib),binder.setUpListeners(eventLib,handler.handleAction,getFirstData)},validate:validate,track:tracker.sendTrack,VERSION:"3.0.3"}},module.exports=factory,root.AnalyticsListener=factory(root)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./binder.js":2,"./handler.js":3,"./logger.js":4,"./tracker.js":5,"./validator.js":6,gator:7}],2:[function(require,module,exports){module.exports=function(root){var delegatedEventActions=["click","submit","linkClick","change"],directEventActions=["hover"],supportedEventActions=delegatedEventActions.concat(directEventActions),directEventActionsSelector=directEventActions.map(function(selector){return'[data-track^="'+selector+'"]'}).join(",");return{directEventActions:directEventActions,supportedEventActions:supportedEventActions,directEventActionsSelector:directEventActionsSelector,attachDirectEventListeners:function(selector,eventName,listener,eventLib){function nodeInsertedHandler(event){var animationName=event.animationName||event.originalEvent&&event.originalEvent.animationName;"nodeInserted"===animationName&&eventLib(event.target).off(eventName,listener).on(eventName,listener)}eventLib(root.document).on(eventName,selector,listener),function(selector){var styleElement=root.document.createElement("style"),cssCode="@keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-moz-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-webkit-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-ms-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}@-o-keyframes nodeInserted{from{outline-color:#fff}to{outline-color:#000}}"+selector+"{animation-duration:.01s;-o-animation-duration:.01s;-ms-animation-duration:.01s;-moz-animation-duration:.01s;-webkit-animation-duration:.01s;animation-name:nodeInserted;-o-animation-name:nodeInserted;-ms-animation-name:nodeInserted;-moz-animation-name:nodeInserted;-webkit-animation-name:nodeInserted};";styleElement.type="text/css",styleElement.styleSheet?styleElement.styleSheet.cssText=cssCode:styleElement.appendChild(root.document.createTextNode(cssCode));root.document.getElementsByTagName("head")[0].appendChild(styleElement)}(selector),eventLib(root.document).on("animationstart",nodeInsertedHandler),eventLib(root.document).on("MSAnimationStart",nodeInsertedHandler),eventLib(root.document).on("webkitAnimationStart",nodeInsertedHandler)},setUpListeners:function(eventLib,handleAction,getFirstData){delegatedEventActions.forEach(function(action){var domEvent="linkClick"===action?"click":action;eventLib(root.document).on(domEvent,"[data-track]",handleAction(action,getFirstData,eventLib))})}}}},{}],3:[function(require,module,exports){var createLogger=require("./logger.js"),createTracker=require("./tracker.js");module.exports=function(root){var logger=createLogger(root),tracker=createTracker(root);return{parseTrackAttribute:parseTrackAttribute,assignProp:assignProp,handleAction:function(action,getFirstData,eventLib){return function(event){var dataObj,dataStr=this.getAttribute("data-track"),target=event.target,parsed=parseTrackAttribute(dataStr);if(parsed&&-1<parsed.eventAction.indexOf(action)){assignProp(dataObj=getFirstData(this,event,dataStr),"eventAction",action),assignProp(dataObj,"pageSection",parsed.pageSection),assignProp(dataObj,"eventLabel",parsed.eventLabel),assignProp(dataObj,"url",root.document.URL),assignProp(dataObj,"eventCategory","userInteraction"),assignProp(dataObj,"name",void 0!==target.name&&""!==target.name?target.name:target.textContent),void 0!==parsed.eventValue&&null!==parsed.eventValue?assignProp(dataObj,"eventValue",parsed.eventValue):assignProp(dataObj,"eventValue",{});try{"linkClick"===action?function(target,dataStr,dataObj){tracker.link(target,dataStr,dataObj)}(target,dataStr,dataObj):"hover"===action?function(target,dataStr,dataObj,eventLib){var startTime=(new Date).getTime(),listener=function(){var hoverTime=(new Date).getTime()-startTime;hoverTime>(dataObj.eventValue.hoverTimeThreshold||1500)&&(assignProp(dataObj.eventValue,"hoverTime",hoverTime),tracker.sendTrack(dataStr,dataObj)),eventLib(target).off("mouseleave",listener)};eventLib(target).on("mouseleave",listener)}(target,dataStr,dataObj,eventLib):"change"===action?function(target,dataStr,dataObj){"select-multiple"===target.type?assignProp(dataObj.eventValue,"formElementValue",function(selectTarget){if(selectTarget.selectedOptions)return[].slice.call(selectTarget.selectedOptions);return[].slice.call(selectTarget.options).filter(function(item){return item.selected})}(target).map(function(item){return item.value})):"checkbox"===target.type?assignProp(dataObj.eventValue,"formElementValue",[].slice.call(root.document.getElementsByName(target.name)).filter(function(item){return item.checked}).map(function(item){return item.value})):void 0!==target.value&&assignProp(dataObj.eventValue,"formElementValue",target.value);tracker.sendTrack(dataStr,dataObj)}(target,dataStr,dataObj):function(dataStr,dataObj){tracker.sendTrack(dataStr,dataObj)}(dataStr,dataObj)}catch(err){logger.error(err)}}}}};function parseTrackAttribute(attr){var parsed,eventValue,parts=attr.trim().split(".");if(parts.length<3||-1!==attr.indexOf(" "))return null;if(parsed={eventAction:parts[0].split(","),pageSection:parts[1],eventLabel:parts[2]},(eventValue=parts.slice(3).join(".")).length)try{parsed.eventValue=function(eventValue){return JSON.parse(eventValue)}(eventValue)}catch(e){logger.error("Unable to parse eventValue as JSON: "+e.toString()),parsed.eventValue=null}return parsed}function assignProp(obj,propName,value){"string"==typeof obj[propName]&&root.debugAnalytics&&logger.error("`getFirstData` function assigned data to reserved property: "+propName+". This data will be overwritten."),obj[propName]=value}}},{"./logger.js":4,"./tracker.js":5}],4:[function(require,module,exports){module.exports=function(root){return{log:function(){root.debugAnalytics&&root.console.log.apply(root.console,arguments)},error:function(){root.debugAnalytics&&root.console.error.apply(root.console,arguments)}}}},{}],5:[function(require,module,exports){var createLogger=require("./logger.js");module.exports=function(root){var logger=createLogger(root);return{link:function(element,dataStr,dataObj){logger.log("Tracking Link: ",dataStr,dataObj),root.analytics.trackLink(element,dataStr,dataObj)},sendTrack:function(dataStr,dataObj){var dataOpts;dataObj.visit?dataObj.visit.visitorId?dataOpts={Optimizely:{userId:dataObj.visit.visitorId}}:logger.error("No visitor ID present in analytics data",dataObj):logger.error("Analytics data missing required object 'visit'!",dataStr,dataObj);logger.log("Tracking: ",dataStr,dataObj,dataOpts),root.analytics.track(dataStr,dataObj,dataOpts)}}}},{"./logger.js":4}],6:[function(require,module,exports){var createBinder=require("./binder.js");module.exports=function(root){var binder=createBinder(root);return{buildValidateMessage:function(parsed,dataStr,elem){var messages=[];parsed?(parsed.eventAction.forEach(function(action,index){-1===binder.supportedEventActions.indexOf(action)?messages.push("\n- Cannot track element because its eventAction `"+action+"` is not one of supported types: ["+binder.supportedEventActions+"]"):0<index&&-1<binder.directEventActions.indexOf(action)&&messages.push("\n- Cannot track element because its eventAction `"+action+"` must at the beginning of the attribute string")}),null===parsed.eventValue&&messages.push("\n- Cannot parse eventValue as JSON from <eventAction>.<pageSection>.<eventLabel>.<eventValue JSON> See error output above."),-1===parsed.eventAction.indexOf("submit")&&0<elem.children.length&&messages.push("\n- Element has children, which could lead to unexpected text recorded in the `name` field.  Confirm that the behavior is as expected."),-1<parsed.eventAction.indexOf("submit")&&!elem.name&&messages.push("\n- Form has no name attribute, which leads to nothing recorded in the `name` field.  Confirm that the behavior is as expected.")):-1<dataStr.trim().indexOf(" ")?messages.push("\n- Cannot track element because its data-track string contains spaces"):messages.push("\n- Cannot track element because data-track attribute does not match form of <eventAction>.<pageSection>.<eventLabel>[.<eventValue JSON>]");messages.length&&(messages.unshift(elem),messages.unshift("Issues found with the following element: "));return messages}}}},{"./binder.js":2}],7:[function(require,module,exports){!function(){var _matcher,_level=0,_id=0,_handlers={},_gatorInstances={};function _matchesSelector(element,selector,boundElement){return"_root"==selector?boundElement:element!==boundElement?function(element){return _matcher||(_matcher=element.matches?element.matches:element.webkitMatchesSelector?element.webkitMatchesSelector:element.mozMatchesSelector?element.mozMatchesSelector:element.msMatchesSelector?element.msMatchesSelector:element.oMatchesSelector?element.oMatchesSelector:Gator.matchesSelector)}(element).call(element,selector)?element:element.parentNode?(_level++,_matchesSelector(element.parentNode,selector,boundElement)):void 0:void 0}function _addHandler(gator,event,selector,callback){_handlers[gator.id]||(_handlers[gator.id]={}),_handlers[gator.id][event]||(_handlers[gator.id][event]={}),_handlers[gator.id][event][selector]||(_handlers[gator.id][event][selector]=[]),_handlers[gator.id][event][selector].push(callback)}function _removeHandler(gator,event,selector,callback){if(_handlers[gator.id])if(event)if(callback||selector)if(callback){if(_handlers[gator.id][event][selector])for(var i=0;i<_handlers[gator.id][event][selector].length;i++)if(_handlers[gator.id][event][selector][i]===callback){_handlers[gator.id][event][selector].splice(i,1);break}}else delete _handlers[gator.id][event][selector];else _handlers[gator.id][event]={};else for(var type in _handlers[gator.id])_handlers[gator.id].hasOwnProperty(type)&&(_handlers[gator.id][type]={})}function _bind(events,selector,callback,remove){if(this.element){events instanceof Array||(events=[events]),callback||"function"!=typeof selector||(callback=selector,selector="_root");var i,id=this.id;for(i=0;i<events.length;i++)remove?_removeHandler(this,events[i],selector,callback):(_handlers[id]&&_handlers[id][events[i]]||Gator.addEvent(this,events[i],_getGlobalCallback(events[i])),_addHandler(this,events[i],selector,callback));return this}function _getGlobalCallback(type){return function(e){!function(id,e,type){if(_handlers[id][type]){var selector,match,target=e.target||e.srcElement,matches={},i=0,j=0;for(selector in _level=0,_handlers[id][type])_handlers[id][type].hasOwnProperty(selector)&&(match=_matchesSelector(target,selector,_gatorInstances[id].element))&&Gator.matchesEvent(type,_gatorInstances[id].element,match,"_root"==selector,e)&&(_level++,_handlers[id][type][selector].match=match,matches[_level]=_handlers[id][type][selector]);for(e.stopPropagation=function(){e.cancelBubble=!0},i=0;i<=_level;i++)if(matches[i])for(j=0;j<matches[i].length;j++){if(!1===matches[i][j].call(matches[i].match,e))return Gator.cancel(e);if(e.cancelBubble)return}}}(id,e,type)}}}function Gator(element,id){if(!(this instanceof Gator)){for(var key in _gatorInstances)if(_gatorInstances[key].element===element)return _gatorInstances[key];return _gatorInstances[++_id]=new Gator(element,_id),_gatorInstances[_id]}this.element=element,this.id=id}Gator.prototype.on=function(events,selector,callback){return _bind.call(this,events,selector,callback)},Gator.prototype.off=function(events,selector,callback){return _bind.call(this,events,selector,callback,!0)},Gator.matchesSelector=function(){},Gator.cancel=function(e){e.preventDefault(),e.stopPropagation()},Gator.addEvent=function(gator,type,callback){var useCapture="blur"==type||"focus"==type;gator.element.addEventListener(type,callback,useCapture)},Gator.matchesEvent=function(){return!0},void 0!==module&&module.exports&&(module.exports=Gator),window.Gator=Gator}()},{}]},{},[1])(1)});